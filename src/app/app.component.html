<!-- Header -->
<div id="header">
  <!-- Title -->
  <div id="title">
    <h2 style="display:inline-block;">Hidden Gems</h2>
    <h3 style="display:inline-block;margin-left:8px;">Cryptocurrency Search Engine</h3>
  </div>

  <!-- Search Form -->
  <div id="search-form">
    <mat-form-field appearance="fill">
      <mat-label>Data Provider</mat-label>
      <mat-select [(value)]="inputProvider" [disabled]="disableInput">
        <mat-option value="Coingecko">CoinGecko</mat-option>
        <!-- <mat-option value="coinmarketcap">CoinMarketCap</mat-option> -->
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Maximum Price</mat-label>
      <input matInput [(ngModel)]="inputMaxPrice" [disabled]="disableInput">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Minimum Volume</mat-label>
      <input matInput [(ngModel)]="inputMinVolume" [disabled]="disableInput">
    </mat-form-field>

    <button (click)="search(true)" [disabled]="disableInput" id="search-submit" mat-fab color="primary" aria-label="Search">
      <mat-icon>search</mat-icon>
    </button>
  </div>

  <!-- Loading -->
  <div id="loading" role="loading">
    <mat-progress-bar mode="indeterminate" *ngIf="disableInput"></mat-progress-bar>
  </div>
</div>

<!-- Search Placeholder -->
<div id="search-placeholder" *ngIf="!results && !disableInput">
  <h4 *ngIf="!error" style="display:inline-block;margin-top:4px;">Run a search to view data.</h4>
  <h4 *ngIf="error" style="display:inline-block;margin-top:4px;">{{error}}</h4>
</div>

<!-- Search Results -->
<div id="search-results" *ngIf="results">
  <h2 style="display:inline-block;margin-right:8px;line-height:22px;">{{results.length}}</h2>
  <h4 style="display:inline-block;line-height:22px;">Results Found 
    <!-- <span *ngIf="coins">(Using Data Cache)</span> -->
    <button style="margin-left:8px;" (click)="search(false)" [disabled]="disableInput" mat-stroked-button color="primary">Refresh Cache</button>
  </h4>

  <div id="search-results-cards">

    <a *ngFor="let coin of results" target="_blank" href="https://www.coingecko.com/en/coins/{{coin.id}}">
      <mat-card>
        <mat-card-header>
          <div class='card-avatar' mat-card-avatar style="background-image:url('{{coin.image}}');"></div>
          <mat-card-title>{{coin.name}}</mat-card-title>
          <mat-card-subtitle>{{coin.symbol}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <table style="width:100%;">
            <tr style="width:100%;">
            <td style="width:50%;text-align:left;"><b>Price</b>:<br/> {{coin.price | currency:'USD':'symbol-narrow':'1.2-12'}}</td>
            <td style="width:50%;text-align:right"><b>Volume</b>:<br/> {{coin.volume | currency:'USD':'symbol-narrow':'1.0-0'}}</td>
          </tr>
          </table>
        </mat-card-content>
      </mat-card>
    </a>
  </div>
</div>

<!-- Search Loading -->
<div id="search-loading" *ngIf="!results && disableInput">
  <h4 style="display:inline-block;margin-top:4px;">Fetching {{inputProvider}} data. This may take a minute...</h4>
</div>